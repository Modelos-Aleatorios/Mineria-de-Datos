---
title: "Informe"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(knitr)
```

## Limpieza de datos

Lo primero que hemos hecho es tomar los datos provisto en Excel y hemos convertido los datos a números y las variables como porcentajes también se han convertido a un número.

Las actividades realizadas paso a paso son las siguientes:

- `CTR`: Se dividió el número entre $100$ para convertirlo a un número.

- `Convrate`: Se división entre $10000$ para convertirla a número.

Después de realizar la conversión en Excel se cargaron los datos en **R** mediante el comando `read_delim`, donde especificamos el separador de los campos como ";" y el separador de miles "," y símbolo decimal ".".

A continuación podemos ver el comando ejecutado para importar los datos.
```{r, echo=TRUE}
data <- read_delim("../data/ROW.csv", 
    ";", escape_double = FALSE, locale = locale(decimal_mark = ",", 
    grouping_mark = "."), trim_ws = TRUE)

head(data, n=6)
```

Como se puede observar los datos se encuentran en un directorio `data`.

## Variables

| Nombre          | Descripción                                                                 |
|-----------------|-----------------------------------------------------------------------------|
| Adgroup         | Grupos de campañas publicitarias                                            |
| MaxCPC          | Lo que el dueño de la campaña está dispuesto a pagar por publicidad. (Bid)  |
| Clicks          | Número de veces que un usuario de internet hace click sobre la publicidad.  |
| Impressions     | Total de veces que la publicidad fué impresa en internet.  |
| CTR             | Cociente entre Clicks e Impressions   |
| AvgCPC          | Lo que termina pagando por la publicación de la publicidad.  |
| Costo           | Gasto de publicidad. |
| AvgPosition     | Posición promedio en la que sale el anuncio publicitario. |
| Qscore[^1]      | Puntaje de calidad de la publicidad.  |
| Ventas          | Total de ventas. |
| Costconv        | Cociente entre Costo y Ventas.  |
| Convrate        | Cociente entre Ventas y Clicks.  |
| Allconv         | Igual a las Ventas. |

A continuación podemos ver las variables y los tipos de cada una de las variables mediante el comando `str`.
```{r}
str(data)
```

Como la variable `Allconv` es redundante se eliminó.

```{r}
data<-data[,-13]
```

## Relación entre las variables

Hemos visto que varias de las variables son el resultado del cociente entre otras dos variables. En particular `CTR`, `AvgCPC`, `Convrate` y `Convcost`.

$$
\begin{array}{ll}
\vspace{3mm} CTR&=\displaystyle\frac{Click}{Impression}\\ 
\vspace{3mm} AvgCPC&=\displaystyle\frac{Costo}{Clicks}\\
\vspace{3mm} Convrate&=\displaystyle\frac{Ventas}{Clicks}\\
Convcost&=\displaystyle\frac{Costo}{Ventas}
\end{array}
$$


## Estadística descriptiva

Primero vamos a obtener la lista de las campañas que se han realizado.

Para ello creamos un vector con todas las campañas y eliminamos los elementos repetidos.
```{r}
varsv<-unique(as.vector(data$Adgroup))
```

Podemos ver que son `r length(varsv)` variables. Estas son: `r varsv`.

Ahora vamos a asignar un valor numérico a cada campaña y así sólo contar con variables numéricas.

```{r}
for(i in 1:(length(varsv))) {
  data$Adgroup[data$Adgroup==varsv[i]]<-i
}
data$Adgroup<-as.numeric(data$Adgroup)
```

```{r}

colnames(data)<-c("Adgroup","MaxCPC","Clicks","Impr",
                    "CTR","AvgCPC","Costo","AvgPos","Qscore",
                    "Ventas","Costc","Convr")

M<-as.matrix(data)

kable(round(cor(M),digits = 2))

plot(data)


data

```


[^1]: [Definición y uso de QScore](https://support.google.com/adwords/answer/7050591)

